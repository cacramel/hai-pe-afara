<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Rescue AI | Alex's Project</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .loader { border: 4px solid #1e293b; border-top: 4px solid #22c55e; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4 md:p-10">

    <div class="w-full max-w-2xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-extrabold text-green-400 mb-2 underline decoration-wavy">Food Rescue AI ğŸ</h1>
            <p class="text-slate-400">Introdu ce ai prin frigider È™i lÄƒsÄƒm AI-ul sÄƒ gÄƒteascÄƒ!</p>
        </header>

        <div class="glass p-6 rounded-3xl mb-6">
            <label class="block text-sm font-medium mb-2 text-slate-300">Ce ingrediente ai?</label>
            <div class="flex gap-2">
                <input type="text" id="ingredientInput" placeholder="ex: pui, smÃ¢ntÃ¢nÄƒ, cartofi..." 
                       class="flex-1 bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-green-500 transition-all text-white">
                <button onclick="generateRecipe()" 
                        class="bg-green-500 hover:bg-green-600 text-slate-900 font-bold px-6 py-3 rounded-xl transition-all active:scale-95">
                    GÄƒseÈ™te ReÈ›etÄƒ
                </button>
            </div>
            <p class="text-xs text-slate-500 mt-3 italic">* SeparÄƒ ingredientele prin virgulÄƒ.</p>
        </div>

        <div id="loader" class="hidden flex flex-col items-center my-10">
            <div class="loader mb-4"></div>
            <p class="text-green-400 animate-pulse">Chef Gemini analizeazÄƒ ingredientele...</p>
        </div>

        <div id="recipeResult" class="hidden glass p-8 rounded-3xl leading-relaxed shadow-2xl">
            <h2 id="recipeTitle" class="text-2xl font-bold text-green-400 mb-4 text-center border-b border-slate-700 pb-4"></h2>
            <div id="recipeContent" class="text-slate-200 whitespace-pre-wrap text-lg">
                </div>
            <div class="mt-8 flex justify-between items-center border-t border-slate-700 pt-6">
                <button onclick="window.print()" class="text-sm text-slate-400 hover:text-white underline">
                    PrinteazÄƒ reÈ›eta
                </button>
                <span class="text-xs text-slate-500 italic">Generat de Food Rescue AI v1.0</span>
            </div>
        </div>
    </div>

    <script>
        // Am curÄƒÈ›at cheia de eventuale spaÈ›ii invizibile
        const API_KEY = "AIzaSyAUM2IoTeenYiRWwOxGywAbPItesVTklkw".trim();

        async function generateRecipe() {
            const input = document.getElementById('ingredientInput');
            const ingredients = input.value.trim();
            const loader = document.getElementById('loader');
            const resultDiv = document.getElementById('recipeResult');
            const contentDiv = document.getElementById('recipeContent');
            const titleDiv = document.getElementById('recipeTitle');

            if (!ingredients) {
                alert("Te rog scrie mÄƒcar un ingredient!");
                return;
            }

            // UI Reset
            loader.classList.remove('hidden');
            resultDiv.classList.add('hidden');

            // URL formatat dintr-o singurÄƒ bucatÄƒ pentru a evita eroarea 404
            const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `EÈ™ti un Masterchef. Am 17 ani È™i am aceste ingrediente: ${ingredients}. Propune-mi o singurÄƒ reÈ›etÄƒ rapidÄƒ, delicioasÄƒ, cu un nume creativ È™i paÈ™i numerotaÈ›i.`
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error ? errorData.error.message : "Eroare la serverul Google");
                }

                const data = await response.json();

                if (data.candidates && data.candidates[0].content.parts[0].text) {
                    let recipeText = data.candidates[0].content.parts[0].text;
                    
                    // CurÄƒÈ›Äƒm caracterele Markdown tipice (stelutele) pentru un aspect mai curat
                    recipeText = recipeText.replace(/\*\*/g, '').replace(/\*/g, 'â€¢');

                    titleDiv.innerText = "ReÈ›eta ta e gata! ğŸ‘¨â€ğŸ³";
                    contentDiv.innerText = recipeText;
                    
                    loader.classList.add('hidden');
                    resultDiv.classList.remove('hidden');
                    
                    // Scroll lin cÄƒtre rezultat
                    resultDiv.scrollIntoView({ behavior: 'smooth' });
                } else {
                    throw new Error("Formatul rÄƒspunsului AI nu este cel aÈ™teptat.");
                }

            } catch (error) {
                console.error("Eroare detaliatÄƒ:", error);
                alert("Ups! " + error.message);
                loader.classList.add('hidden');
            }
        }

        // Permite apÄƒsarea tastei Enter pentru a genera
        document.getElementById('ingredientInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                generateRecipe();
            }
        });
    </script>
</body>
</html>
